<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ExamenApiSql.MySqlPage"
             Title="MySQL Personas">

	<ScrollView>
		<VerticalStackLayout Padding="10">

			<Label Text="Nombre" />
			<Entry x:Name="NombreEntry" />

			<Label Text="Salario" />
			<Entry x:Name="SalarioEntry" Keyboard="Numeric" />

			<Label Text="Fecha (yyyy-MM-dd)" />
			<Entry x:Name="FechaEntry" />

			<Label Text="Código" />
			<Entry x:Name="CodigoEntry" Keyboard="Numeric" />

			<HorizontalStackLayout>
				<Button Text="Insertar" Clicked="Insertar_Clicked" />
				<Button Text="Actualizar" Clicked="Actualizar_Clicked" />
				<Button Text="Borrar seleccionados" Clicked="Borrar_Clicked" />
			</HorizontalStackLayout>

			<BoxView HeightRequest="1" Color="Gray" />

			<Label Text="Buscar por nombre" />
			<Entry x:Name="FiltroNombreEntry" TextChanged="Filtros_Changed" />

			<Label Text="Buscar por fecha (yyyy-MM-dd)" />
			<Entry x:Name="FiltroFechaEntry" TextChanged="Filtros_Changed" />

			<Label Text="Buscar por código" />
			<Entry x:Name="FiltroCodigoEntry" Keyboard="Numeric" TextChanged="Filtros_Changed" />

			<Button Text="Refrescar" Clicked="Refrescar_Clicked" />

			<CollectionView x:Name="PersonasCollectionView" SelectionMode="None">
				<CollectionView.ItemTemplate>
					<DataTemplate>
						<Grid Padding="5" ColumnDefinitions="Auto,*,Auto">

							<CheckBox Grid.Column="0"
                                      IsChecked="{Binding Seleccionado}" />

							<VerticalStackLayout Grid.Column="1">
								<Label Text="{Binding Nombre}" FontAttributes="Bold" />
								<Label FontSize="12">
									<Label.Text>
										<MultiBinding StringFormat="Salario: {0}, Fecha: {1}, Código: {2}">
											<Binding Path="Salario" />
											<Binding Path="Fecha" StringFormat="yyyy-MM-dd" />
											<Binding Path="Codigo" />
										</MultiBinding>
									</Label.Text>
								</Label>
							</VerticalStackLayout>

							<Button Grid.Column="2"
                                    Text="Editar"
                                    BindingContext="{Binding .}"
                                    Clicked="Editar_Clicked" />
						</Grid>
					</DataTemplate>
				</CollectionView.ItemTemplate>
			</CollectionView>

		</VerticalStackLayout>
	</ScrollView>

</ContentPage>
