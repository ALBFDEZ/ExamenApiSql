<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ExamenApiSql.MainPage"
             Title="API Personas">

	<ScrollView>
		<VerticalStackLayout Padding="10">

			<Label Text="Nombre" />
			<Entry x:Name="NombreEntry" />

			<Label Text="Edad" />
			<Entry x:Name="EdadEntry" Keyboard="Numeric" />

			<Label Text="Salario" />
			<Entry x:Name="SalarioEntry" Keyboard="Numeric" />

			<Label Text="Ciudad" />
			<Entry x:Name="CiudadEntry" />

			<HorizontalStackLayout>
				<Label Text="Activo" />
				<Switch x:Name="ActivoSwitch" />
			</HorizontalStackLayout>

			<HorizontalStackLayout>
				<Button Text="Insertar" Clicked="Insertar_Clicked" />
				<Button Text="Actualizar" Clicked="Actualizar_Clicked" />
				<Button Text="Borrar seleccionados" Clicked="Borrar_Clicked" />
			</HorizontalStackLayout>

			<BoxView HeightRequest="1" Color="Gray" />

			<Label Text="Buscar por nombre" />
			<Entry x:Name="FiltroNombreEntry" TextChanged="Filtros_Changed" />

			<Label Text="Buscar por ciudad" />
			<Entry x:Name="FiltroCiudadEntry" TextChanged="Filtros_Changed" />

			<Label Text="Salario mínimo" />
			<Entry x:Name="FiltroSalarioEntry" Keyboard="Numeric" TextChanged="Filtros_Changed" />

			<HorizontalStackLayout>
				<Label Text="Solo activos" />
				<Switch x:Name="FiltroActivoSwitch" Toggled="Filtros_Changed" />
			</HorizontalStackLayout>

			<Button Text="Refrescar" Clicked="Refrescar_Clicked" />

			<CollectionView x:Name="PersonasCollectionView" SelectionMode="None">
				<CollectionView.ItemTemplate>
					<DataTemplate>
						<Grid Padding="5" ColumnDefinitions="Auto,*,Auto">

							<CheckBox Grid.Column="0"
                                      IsChecked="{Binding Seleccionado}" />

							<VerticalStackLayout Grid.Column="1">
								<Label Text="{Binding Nombre}" FontAttributes="Bold" />
								<Label FontSize="12">
									<Label.Text>
										<MultiBinding StringFormat="Edad: {0}, Salario: {1}, Ciudad: {2}, Activo: {3}">
											<Binding Path="Edad" />
											<Binding Path="Salario" />
											<Binding Path="Ciudad" />
											<Binding Path="Activo" />
										</MultiBinding>
									</Label.Text>
								</Label>
							</VerticalStackLayout>

							<Button Grid.Column="2"
                                    Text="Editar"
                                    BindingContext="{Binding .}"
                                    Clicked="Editar_Clicked" />
						</Grid>
					</DataTemplate>
				</CollectionView.ItemTemplate>
			</CollectionView>

		</VerticalStackLayout>
	</ScrollView>

</ContentPage>
